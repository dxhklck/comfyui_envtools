# Python环境依赖检查器
# ComfyUI环境维护小工具

一款专为ComfyUI用户设计的Python环境维护与管理工具，帮助您轻松管理、检查和优化Python包环境，确保ComfyUI稳定运行。

## 📋 项目简介

这是一款功能全面的图形界面工具，专为ComfyUI用户打造，用于管理Python包依赖、检测环境冲突、优化镜像源以及执行各种环境维护任务，让您的ComfyUI运行环境始终保持最佳状态。


## 🚀 功能特点

- **现代化图形界面**：操作直观简便，适合各类用户使用
- **多镜像源支持**：内置阿里云、清华大学、中科大等主流国内镜像源
- **依赖冲突检测**：全面分析当前环境与新依赖之间的版本兼容性
- **模拟安装验证**：使用`--dry-run`模式提前验证安装兼容性
- **多环境管理**：支持选择和管理不同的Python环境
- **依赖树可视化**：分析并展示包之间的依赖关系
- **镜像源测试**：自动测试并推荐最优镜像源
- **单例应用保障**：确保程序只能打开一个实例，避免资源冲突
- **错误诊断与修复**：提供详细的错误诊断和修复建议
- **批量操作支持**：支持批量安装、卸载和更新包

## 📋 系统要求

- Python 3.6或更高版本
- pip已正确安装并配置
- Windows操作系统
- 推荐分辨率：1280x720或更高

## 📖 使用指南

### 基本操作流程

1. **启动程序**：运行`Comfyui环境维护小工具.exe`或Python脚本文件
2. **环境选择**：默认使用当前Python环境，可点击"选择环境"按钮切换
3. **镜像源配置**：从下拉菜单中选择合适的PyPI镜像源
4. **执行操作**：根据需要选择相应功能按钮执行操作
5. **查看结果**：在结果显示区域查看操作输出和分析报告

### 核心功能详解

#### 🔍 环境冲突检查
- 点击"检查环境冲突"按钮分析当前环境中的包兼容性
- 支持解析requirements.txt文件中的各类依赖格式
- 详细展示冲突包、版本要求和解决方案

#### 📦 包管理操作
- **安装包**：输入包名和版本，选择安装选项进行安装
- **卸载包**：快速卸载不需要的包及其依赖
- **更新包**：将指定包更新到最新版本或特定版本
- **查看包信息**：获取已安装包的详细信息和版本历史

#### 🚀 镜像源优化
- **镜像源测试**：自动测试所有内置镜像源的连接速度
- **智能推荐**：根据测试结果推荐最优镜像源
- **一键切换**：快速切换PyPI镜像源，提升下载速度

#### 📊 环境分析
- **查看当前环境**：显示所有已安装包及其版本信息
- **搜索包**：在已安装包中快速搜索特定包
- **依赖分析**：使用pipdeptree分析和展示包依赖关系
- **冲突库排查**：检测并解决潜在的库冲突问题

## 🖥️ 界面说明

程序界面采用分区设计，各功能区域清晰可见：

- **顶部导航区**：显示程序名称、版本信息和功能导航
- **环境配置区**：包含Python环境选择和镜像源配置选项
- **功能操作区**：提供各类操作按钮，分类清晰
- **结果显示区**：展示操作输出、分析报告和错误信息
- **进度指示区**：显示当前操作的进度和状态

## 📝 结果解释

程序输出结果使用明确的状态标识，便于快速理解：

- **✅ [正常]**：已安装的包满足版本要求
- **⚠️ [冲突]**：已安装的包版本与需求不符，需要解决
- **🔄 [可更新]**：包存在可用更新版本
- **❌ [未安装]**：当前环境中未安装此包
- **❓ [错误]**：检查过程中出现错误
- **🔗 [Git包]**：需要从Git仓库安装的特殊包

## ⚠️ 注意事项

1. **操作前备份**：在执行重要操作前，请备份您的Python环境
2. **模拟安装优先**：建议先使用模拟安装功能验证兼容性
3. **权限要求**：某些操作可能需要管理员权限，请以管理员身份运行
4. **编码问题**：确保requirements.txt文件使用UTF-8编码格式
5. **网络连接**：部分功能需要稳定的网络连接以访问PyPI和镜像源

## 🤝 技术支持

- 作者：练老师
- QQ交流群：723799422
- 版本：V2.1

## 📄 更新日志

**V2.1 更新内容：**
- 优化了程序界面布局和响应速度
- 增强了镜像源测试和管理功能
- 修复了subprocess调用相关的兼容性问题
- 改进了代码结构，提升了程序稳定性
- 完善了错误处理和用户提示

## 💡 使用建议

1. 定期使用"检查环境冲突"功能，预防潜在问题
2. 在安装新包前，先使用模拟安装功能验证兼容性
3. 根据网络环境选择合适的镜像源，提升下载速度
4. 如遇复杂依赖问题，使用"依赖分析"功能进行排查
5. 对于频繁使用的功能，建议将常用操作组合使用

## 📌 免责声明

本工具旨在提供便捷的Python环境管理功能，但不对操作结果做任何保证。在对重要环境进行操作前，请务必做好备份工作。如因使用本工具导致任何损失，作者不承担任何责任。